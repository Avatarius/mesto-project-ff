{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\n\n// Функция создания карточки\nfunction addCard(cardObj, funcObj) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const { owner: {_id: ownerId}, _id: cardId, myId, name, link, likes } = cardObj;\n  const { removeFunc, likeFunc, imgClickFunc } = funcObj;\n  const title = cardElement.querySelector(\".card__title\");\n  const img = cardElement.querySelector(\".card__image\");\n  const removeBtn = cardElement.querySelector(\".card__delete-button\");\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\n  const likeCounter = cardElement.querySelector('.card__like-counter');\n  // обновим состояние элементов карточки\n  if (ownerId !== myId) {\n    removeBtn.classList.add('card__delete-button_hidden');\n  }\n  if (likes.length > 0 && likes.some(item => item._id === myId)) {\n    likeBtn.classList.add('card__like-button_is-active');\n  }\n  updateLikeCounter(likeCounter, cardObj.likes.length);\n  title.textContent = name;\n  img.alt = name;\n  img.src = link;\n\n  removeBtn.addEventListener(\"click\", (evt) => removeFunc(evt, cardId));\n  likeBtn.addEventListener(\"click\", (evt) => likeFunc(evt, cardId));\n  img.addEventListener(\"click\", imgClickFunc);\n\n  return cardElement;\n}\n\n// Функция удаления карточки\nfunction removeCard(evt) {\n  evt.target.closest(\".card\").remove();\n}\n\n// лайк\nfunction likeCard(evt) {\n  evt.target.classList.toggle(\"card__like-button_is-active\");\n}\n\nfunction updateLikeCounter(counter, count) {\n  counter.textContent = count;\n}\n\nexport { addCard, removeCard, likeCard, updateLikeCounter };\n","function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.openedPopup = popup;\n  document.addEventListener(\"mousedown\", closeModalWithMouse);\n  document.addEventListener(\"keydown\", closeModalWithEsc);\n}\n\nfunction closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"mousedown\", closeModalWithMouse);\n  document.removeEventListener(\"keydown\", closeModalWithEsc);\n}\n\nfunction closeModalWithMouse(evt) {\n  if (\n    evt.target.classList.contains(\"popup__close\") ||\n    evt.target.classList.contains(\"popup\")\n  ) {\n    const popup = evt.target.closest(\".popup\");\n    closeModal(popup);\n  }\n}\n\nfunction closeModalWithEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closeModal(evt.currentTarget.openedPopup);\n  }\n}\n\nexport {\n  openModal,\n  closeModal,\n};\n","function enableValidation(settingsObj) {\n  const formList = Array.from(\n    document.querySelectorAll(settingsObj.formSelector)\n  );\n\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, settingsObj);\n  });\n}\n\nfunction clearValidation(formElement, settingsObj) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settingsObj.inputSelector)\n  );\n  const button = formElement.querySelector(settingsObj.submitButtonSelector);\n  inputList.forEach((inputElement, index) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    hideInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n    inputElement.setCustomValidity(\"\");\n  });\n  toggleButtonState(inputList, button, settingsObj.inactiveButtonClass);\n}\n\nfunction setEventListeners(formElement, settingsObj) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settingsObj.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settingsObj.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, settingsObj.inactiveButtonClass);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, settingsObj);\n      toggleButtonState(\n        inputList,\n        buttonElement,\n        settingsObj.inactiveButtonClass\n      );\n    });\n  });\n}\n\nfunction checkInputValidity(formElement, inputElement, settingsObj) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.patternMismatchError);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n  // основная проверка на валидность\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  if (!inputElement.validity.valid) {\n    showInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n  } else {\n    hideInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n  }\n}\n\nfunction showInputError(\n  errorElement,\n  inputElement,\n  inputErrorClass,\n  errorActiveClass\n) {\n  errorElement.textContent = inputElement.validationMessage;\n  errorElement.classList.add(errorActiveClass);\n  inputElement.classList.add(inputErrorClass);\n}\n\nfunction hideInputError(\n  errorElement,\n  inputElement,\n  inputErrorClass,\n  errorActiveClass\n) {\n  errorElement.textContent = \"\";\n  errorElement.classList.remove(errorActiveClass);\n  inputElement.classList.remove(inputErrorClass);\n}\n\nfunction hasInvalidInput(inputList) {\n  return (\n    inputList.some((inputElement) => !inputElement.validity.valid) ||\n    inputList.some((inputElement) => inputElement.value === \"\")\n  );\n}\n\nfunction toggleButtonState(inputList, buttonElement, inactiveButtonSelector) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(inactiveButtonSelector);\n  } else {\n    buttonElement.classList.remove(inactiveButtonSelector);\n  }\n}\n\nexport { enableValidation, clearValidation };\n","const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-8\",\n  headers: {\n    authorization: \"6aa9cfa4-9e37-45ec-86e7-4ccce0f3abad\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction getProfileInfoApi() {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction getCardListApi() {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction setProfileInfoApi(name, about) {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n    body: JSON.stringify({\n      name,\n      about,\n    }),\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction addCardApi(name, link) {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n    body: JSON.stringify({\n      name,\n      link,\n    }),\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction removeCardApi(cardId) {\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\n    method: \"DELETE\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction likeCardApi(cardId, isAlreadyLiked) {\n  const requestMethod = isAlreadyLiked ? \"DELETE\" : \"PUT\";\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: requestMethod,\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction setProfileAvatar(url) {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n    body: JSON.stringify({\n      avatar: url,\n    }),\n  }).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nexport {\n  getProfileInfoApi,\n  setProfileInfoApi,\n  getCardListApi,\n  addCardApi,\n  removeCardApi,\n  likeCardApi,\n  setProfileAvatar,\n};\n","import \"../pages/index.css\";\nimport { addCard, removeCard, likeCard, updateLikeCounter } from \"./card\";\nimport { openModal, closeModal } from \"./modal\";\nimport { enableValidation, clearValidation } from \"./validation\";\nimport {\n  getProfileInfoApi,\n  setProfileInfoApi,\n  getCardListApi,\n  addCardApi,\n  removeCardApi,\n  likeCardApi,\n  setProfileAvatar,\n} from \"./api\";\n\n// список с карточками\nconst placesList = document.querySelector(\".places__list\");\n// Данные профиля\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst profileAvatar = document.querySelector(\".profile__image\");\n// кнопки открытия попапов\nconst addCardButton = document.querySelector(\".profile__add-button\");\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\n\n// функция для генерации объектов со всеми нужными элементами попапа\nfunction constructPopupObj(popupClass) {\n  const popup = document.querySelector(popupClass);\n  return {\n    popup,\n    form: popup.querySelector(\".popup__form\"),\n    inputList: popup.querySelectorAll(\".popup__input\"),\n    button: popup.querySelector(\".popup__button\"),\n    img: popup.querySelector(\".popup__image\"),\n    caption: popup.querySelector(\".popup__caption\"),\n  };\n}\n\n// попап объекты\nconst addNewCardPopupObj = constructPopupObj(\".popup_type_new-card\");\nconst editProfilePopupObj = constructPopupObj(\".popup_type_edit\");\nconst editProfileAvatarPopupObj = constructPopupObj(\".popup_type_avatar-edit\");\nconst removeCardPopupObj = constructPopupObj(\".popup_type_remove-card\");\nconst imagePopupObj = constructPopupObj(\".popup_type_image\");\n// объект с настройками для валидации\nconst validationObj = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  errorSelector: \".popup__input-error\",\n  inputErrorClass: \"popup__input_error\",\n  errorActiveClass: \"popup__input-error_active\",\n};\n// Объект с функциями\nconst funcObj = {\n  removeFunc: function (evt, id) {\n    handleCardRemoveSubmit = function (event) {\n      event.preventDefault();\n      removeCardApi(id)\n        .then(() => {\n          removeCard(evt);\n        })\n        .catch((err) => console.log(`Не удалось удалить карточку. ${err}`))\n        .finally(() => {\n          closeModal(removeCardPopupObj.popup);\n          setTimeout(\n            () =>\n              renderLoading(\n                false,\n                removeCardPopupObj.button,\n                \"Да\",\n                \"Идёт удаление\"\n              ),\n            600\n          );\n        });\n    };\n    openModal(removeCardPopupObj.popup);\n  },\n  likeFunc: function (evt, id) {\n    const isAlreadyLiked = evt.target.classList.contains(\n      \"card__like-button_is-active\"\n    );\n    likeCardApi(id, isAlreadyLiked)\n      .then((res) => {\n        likeCard(evt);\n        updateLikeCounter(evt.target.nextElementSibling, res.likes.length);\n      })\n      .catch((err) => console.log(`Не удалось поставить лайк. ${err}`));\n  },\n  imgClickFunc: handleCardImgClick,\n};\n\n// берём данные профиля и карточки и добавляем на страницу\nlet myId;\nPromise.all([getProfileInfoApi(), getCardListApi()])\n  .then((resList) => {\n    // обновляем профиль\n    const [profileInfo, cardList] = resList;\n    profileTitle.textContent = profileInfo.name;\n    profileDescription.textContent = profileInfo.about;\n    profileAvatar.style.backgroundImage = `url(${profileInfo.avatar})`;\n    myId = profileInfo._id;\n    // показываем карточки\n    cardList.forEach((card) => {\n      card.myId = myId;\n      placesList.append(addCard(card, funcObj));\n    });\n  })\n  .catch((err) => {\n    console.log(`Не удалось загрузить данные. ${err}`);\n  });\n\n// во время загрузки меняем текст кнопки\nfunction renderLoading(\n  isLoading,\n  btn,\n  defaultText = \"Сохранить\",\n  newText = \"Сохранение...\"\n) {\n  const buttonText = isLoading ? newText : defaultText;\n  btn.textContent = buttonText;\n}\n// обработчики submit\nfunction handleEditProfileFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, editProfilePopupObj.button);\n\n  const name = editProfilePopupObj.inputList[0].value;\n  const about = editProfilePopupObj.inputList[1].value;\n  setProfileInfoApi(name, about)\n    .then(() => {\n      profileTitle.textContent = name;\n      profileDescription.textContent = about;\n    })\n    .catch((err) => console.log(`Не удалось изменить профиль. ${err}`))\n    .finally(() => {\n      closeModal(editProfilePopupObj.popup);\n      setTimeout(() => renderLoading(false, editProfilePopupObj.button), 600);\n    });\n}\n// добавляем новую карточку\nfunction handleAddCardFormSubmit(evt) {\n  // отрефакторить\n  evt.preventDefault();\n  renderLoading(true, addNewCardPopupObj.button);\n  const name = addNewCardPopupObj.inputList[0].value;\n  const link = addNewCardPopupObj.inputList[1].value;\n  addCardApi(name, link)\n    .then((res) => {\n      res.name = name;\n      res.link = link;\n      res.myId = myId;\n      placesList.prepend(addCard(res, funcObj));\n    })\n    .catch((err) => console.log(`Не удалось добавить карточку. ${err}`))\n    .finally(() => {\n      closeModal(addNewCardPopupObj.popup);\n      setTimeout(() => renderLoading(false, addNewCardPopupObj.button), 600);\n    });\n}\n// фунция для удаления карточки, заменяется в funcObj\nlet handleCardRemoveSubmit = function (evt) {\n  evt.preventDefault();\n};\n// меняем аватарку\nfunction handleEditAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, editProfileAvatarPopupObj.button);\n  const url = editProfileAvatarPopupObj.inputList[0].value;\n\n  setProfileAvatar(url)\n    .then((res) => {\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`;\n    })\n    .catch((err) => console.log(`Не удалось загрузить аватар. ${err}`))\n    .finally(() => {\n      closeModal(editProfileAvatarPopupObj.popup);\n      setTimeout(\n        () => renderLoading(false, editProfileAvatarPopupObj.button),\n        600\n      );\n    });\n}\n\n// обработчик клика по картинке карточки\nfunction handleCardImgClick(evt) {\n  imagePopupObj.img.src = evt.target.src;\n  imagePopupObj.img.alt = evt.target.alt;\n  imagePopupObj.caption.textContent = evt.target.alt;\n  openModal(imagePopupObj.popup);\n}\n\n// открытие попапов\naddCardButton.addEventListener(\"click\", function () {\n  addNewCardPopupObj.form.reset();\n  clearValidation(addNewCardPopupObj.form, validationObj);\n  openModal(addNewCardPopupObj.popup);\n});\nprofileEditButton.addEventListener(\"click\", function () {\n  clearValidation(editProfilePopupObj.form, validationObj);\n  editProfilePopupObj.inputList[0].value = profileTitle.textContent;\n  editProfilePopupObj.inputList[1].value = profileDescription.textContent;\n  openModal(editProfilePopupObj.popup);\n});\nprofileAvatar.addEventListener(\"click\", function () {\n  editProfileAvatarPopupObj.form.reset();\n  openModal(editProfileAvatarPopupObj.popup);\n});\n\n// submit\naddNewCardPopupObj.form.addEventListener(\"submit\", handleAddCardFormSubmit);\neditProfilePopupObj.form.addEventListener(\n  \"submit\",\n  handleEditProfileFormSubmit\n);\neditProfileAvatarPopupObj.form.addEventListener(\n  \"submit\",\n  handleEditAvatarFormSubmit\n);\nremoveCardPopupObj.form.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  renderLoading(true, removeCardPopupObj.button, \"Да\", \"Идёт удаление\");\n  handleCardRemoveSubmit(evt);\n});\n\n// валидация инпутов\nenableValidation(validationObj);\n"],"names":["cardTemplate","document","querySelector","content","addCard","cardObj","funcObj","cardElement","cloneNode","ownerId","owner","_id","cardId","myId","name","link","likes","removeFunc","likeFunc","imgClickFunc","title","img","removeBtn","likeBtn","likeCounter","classList","add","length","some","item","updateLikeCounter","textContent","alt","src","addEventListener","evt","counter","count","openModal","popup","openedPopup","closeModalWithMouse","closeModalWithEsc","closeModal","remove","removeEventListener","target","contains","closest","key","currentTarget","clearValidation","formElement","settingsObj","inputList","Array","from","querySelectorAll","inputSelector","button","submitButtonSelector","forEach","inputElement","index","hideInputError","concat","id","inputErrorClass","errorActiveClass","setCustomValidity","toggleButtonState","inactiveButtonClass","errorElement","buttonElement","inactiveButtonSelector","validity","valid","value","hasInvalidInput","config","authorization","placesList","profileTitle","profileDescription","profileAvatar","addCardButton","profileEditButton","constructPopupObj","popupClass","form","caption","addNewCardPopupObj","editProfilePopupObj","editProfileAvatarPopupObj","removeCardPopupObj","imagePopupObj","validationObj","formSelector","errorSelector","handleCardRemoveSubmit","event","preventDefault","fetch","method","headers","then","res","ok","json","Promise","reject","status","removeCard","catch","err","console","log","finally","setTimeout","renderLoading","isAlreadyLiked","requestMethod","toggle","likeCard","nextElementSibling","isLoading","btn","buttonText","arguments","undefined","all","resList","_resList","profileInfo","cardList","about","style","backgroundImage","avatar","card","append","reset","body","JSON","stringify","addCardApi","prepend","setProfileInfoApi","url","patternMismatch","dataset","patternMismatchError","validationMessage","showInputError","checkInputValidity","setEventListeners"],"sourceRoot":""}