{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\n\n// Функция создания карточки\nfunction addCard(cardObj, funcObj) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const {\n    owner: { _id: ownerId },\n    _id: cardId,\n    myId,\n    name,\n    link,\n    likes,\n  } = cardObj;\n  const { removeFunc, likeFunc, imgClickFunc } = funcObj;\n  const title = cardElement.querySelector(\".card__title\");\n  const img = cardElement.querySelector(\".card__image\");\n  const removeBtn = cardElement.querySelector(\".card__delete-button\");\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\n\n  // обновим состояние элементов карточки\n  if (ownerId !== myId) {\n    removeBtn.classList.add(\"card__delete-button_hidden\");\n  }\n  if (likes.length > 0 && likes.some((item) => item._id === myId)) {\n    likeBtn.classList.add(\"card__like-button_is-active\");\n  }\n  updateLikeCounter(likeBtn, likes.length);\n\n  title.textContent = name;\n  img.alt = name;\n  img.src = link;\n\n  removeBtn.addEventListener(\"click\", (evt) => removeFunc(removeBtn, cardId));\n  likeBtn.addEventListener(\"click\", (evt) =>\n    likeFunc(\n      likeBtn,\n      cardId,\n      likeBtn.classList.contains(\"card__like-button_is-active\")\n    )\n  );\n  img.addEventListener(\"click\", imgClickFunc);\n\n  return cardElement;\n}\n\n// Функция удаления карточки\nfunction removeCard(button) {\n  button.closest(\".card\").remove();\n}\n\n// лайк\nfunction likeCard(button, isAlreadyLiked) {\n  if (isAlreadyLiked) {\n    button.classList.remove(\"card__like-button_is-active\");\n  } else {\n    button.classList.add(\"card__like-button_is-active\");\n  }\n}\n\n// обновляем счетчик лайков\nfunction updateLikeCounter(button, count) {\n  const counter = button.closest(\".card\").querySelector(\".card__like-counter\");\n  counter.textContent = count;\n}\n\nexport { addCard, removeCard, likeCard, updateLikeCounter };\n","function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.openedPopup = popup;\n  document.addEventListener(\"mousedown\", closeModalWithMouse);\n  document.addEventListener(\"keydown\", closeModalWithEsc);\n}\n\nfunction closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"mousedown\", closeModalWithMouse);\n  document.removeEventListener(\"keydown\", closeModalWithEsc);\n}\n\nfunction closeModalWithMouse(evt) {\n  if (\n    evt.target.classList.contains(\"popup__close\") ||\n    evt.target.classList.contains(\"popup\")\n  ) {\n    const popup = evt.target.closest(\".popup\");\n    closeModal(popup);\n  }\n}\n\nfunction closeModalWithEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closeModal(evt.currentTarget.openedPopup);\n  }\n}\n\nexport {\n  openModal,\n  closeModal,\n};\n","function enableValidation(settingsObj) {\n  const formList = Array.from(\n    document.querySelectorAll(settingsObj.formSelector)\n  );\n\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, settingsObj);\n  });\n}\n\nfunction clearValidation(formElement, settingsObj) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settingsObj.inputSelector)\n  );\n  const button = formElement.querySelector(settingsObj.submitButtonSelector);\n  inputList.forEach((inputElement) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    hideInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n    inputElement.setCustomValidity(\"\");\n  });\n  toggleButtonState(inputList, button, settingsObj.inactiveButtonClass);\n}\n\nfunction setEventListeners(formElement, settingsObj) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settingsObj.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settingsObj.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, settingsObj.inactiveButtonClass);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, settingsObj);\n      toggleButtonState(\n        inputList,\n        buttonElement,\n        settingsObj.inactiveButtonClass\n      );\n    });\n  });\n}\n\nfunction checkInputValidity(formElement, inputElement, settingsObj) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.patternMismatchError);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n  // основная проверка на валидность\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  if (!inputElement.validity.valid) {\n    showInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n  } else {\n    hideInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n  }\n}\n\nfunction showInputError(\n  errorElement,\n  inputElement,\n  inputErrorClass,\n  errorActiveClass\n) {\n  errorElement.textContent = inputElement.validationMessage;\n  errorElement.classList.add(errorActiveClass);\n  inputElement.classList.add(inputErrorClass);\n}\n\nfunction hideInputError(\n  errorElement,\n  inputElement,\n  inputErrorClass,\n  errorActiveClass\n) {\n  errorElement.textContent = \"\";\n  errorElement.classList.remove(errorActiveClass);\n  inputElement.classList.remove(inputErrorClass);\n}\n\nfunction hasInvalidInput(inputList) {\n  return (\n    inputList.some((inputElement) => !inputElement.validity.valid) ||\n    inputList.some((inputElement) => inputElement.value === \"\")\n  );\n}\n\nfunction toggleButtonState(inputList, buttonElement, inactiveButtonSelector) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(inactiveButtonSelector);\n  } else {\n    buttonElement.classList.remove(inactiveButtonSelector);\n  }\n}\n\nexport { enableValidation, clearValidation };\n","const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-8\",\n  headers: {\n    authorization: \"6aa9cfa4-9e37-45ec-86e7-4ccce0f3abad\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction getResponseData(res) {\n  if (!res.ok) {\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n  return res.json();\n}\n\nfunction getProfileInfoApi() {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n  }).then(getResponseData);\n}\n\nfunction getCardListApi() {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n  }).then(getResponseData);\n}\n\nfunction setProfileInfoApi(name, about) {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name,\n      about,\n    }),\n  }).then(getResponseData);\n}\n\nfunction addCardApi(name, link) {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name,\n      link,\n    }),\n  }).then(getResponseData);\n}\n\nfunction removeCardApi(cardId) {\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(getResponseData);\n}\n\nfunction likeCardApi(cardId, isAlreadyLiked) {\n  const requestMethod = isAlreadyLiked ? \"DELETE\" : \"PUT\";\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: requestMethod,\n    headers: config.headers,\n  }).then(getResponseData);\n}\n\nfunction setProfileAvatar(url) {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: url,\n    }),\n  }).then(getResponseData);\n}\n\nexport {\n  getProfileInfoApi,\n  setProfileInfoApi,\n  getCardListApi,\n  addCardApi,\n  removeCardApi,\n  likeCardApi,\n  setProfileAvatar,\n};\n","import \"../pages/index.css\";\nimport { addCard, removeCard, likeCard, updateLikeCounter } from \"./card\";\nimport { openModal, closeModal } from \"./modal\";\nimport { enableValidation, clearValidation } from \"./validation\";\nimport {\n  getProfileInfoApi,\n  setProfileInfoApi,\n  getCardListApi,\n  addCardApi,\n  removeCardApi,\n  likeCardApi,\n  setProfileAvatar,\n} from \"./api\";\n\n// список с карточками\nconst placesList = document.querySelector(\".places__list\");\n// Данные профиля\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst profileAvatar = document.querySelector(\".profile__image\");\n// кнопки открытия попапов\nconst addCardButton = document.querySelector(\".profile__add-button\");\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\n\n// попап объекты\nconst addNewCardPopup = document.querySelector(\".popup_type_new-card\");\nconst addNewCardPopupObj = {\n  popup: addNewCardPopup,\n  form: addNewCardPopup.querySelector(\".popup__form\"),\n  button: addNewCardPopup.querySelector(\".popup__button\"),\n};\nconst editProfilePopup = document.querySelector(\".popup_type_edit\");\nconst editProfilePopupObj = {\n  popup: editProfilePopup,\n  form: editProfilePopup.querySelector(\".popup__form\"),\n  button: editProfilePopup.querySelector(\".popup__button\"),\n};\nconst editProfileAvatarPopup = document.querySelector(\n  \".popup_type_avatar-edit\"\n);\nconst editProfileAvatarPopupObj = {\n  popup: editProfileAvatarPopup,\n  form: editProfileAvatarPopup.querySelector(\".popup__form\"),\n  button: editProfileAvatarPopup.querySelector(\".popup__button\"),\n};\nconst removeCardPopup = document.querySelector(\".popup_type_remove-card\");\nconst removeCardPopupObj = {\n  popup: removeCardPopup,\n  form: removeCardPopup.querySelector(\".popup__form\"),\n  button: removeCardPopup.querySelector(\".popup__button\"),\n};\nconst imagePopup = document.querySelector(\".popup_type_image\");\nconst imagePopupObj = {\n  popup: imagePopup,\n  img: imagePopup.querySelector(\".popup__image\"),\n  caption: imagePopup.querySelector(\".popup__caption\"),\n};\n\n// объект с настройками для валидации\nconst validationObj = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  errorSelector: \".popup__input-error\",\n  inputErrorClass: \"popup__input_error\",\n  errorActiveClass: \"popup__input-error_active\",\n};\n// Объект с функциями\nconst funcObj = {\n  removeFunc: function (button, id) {\n    handleCardRemoveSubmit = function (event) {\n      event.preventDefault();\n      removeCardApi(id)\n        .then(() => {\n          removeCard(button);\n          closeModal(removeCardPopupObj.popup);\n        })\n        .catch((err) => console.log(`Не удалось удалить карточку. ${err}`))\n        .finally(() =>\n          setTimeout(\n            () =>\n              renderLoading(\n                false,\n                removeCardPopupObj.button,\n                \"Да\",\n                \"Идёт удаление\"\n              ),\n            600\n          )\n        );\n    };\n    openModal(removeCardPopupObj.popup);\n  },\n  likeFunc: function (button, id, isAlreadyLiked) {\n    likeCardApi(id, isAlreadyLiked)\n      .then((res) => {\n        likeCard(button, isAlreadyLiked);\n        updateLikeCounter(button, res.likes.length);\n      })\n      .catch((err) => console.log(`Не удалось поставить лайк. ${err}`));\n  },\n  imgClickFunc: handleCardImgClick,\n};\n\n// берём данные профиля и карточки и добавляем на страницу\nlet myId;\nPromise.all([getProfileInfoApi(), getCardListApi()])\n  .then((resList) => {\n    // обновляем профиль\n    const [profileInfo, cardList] = resList;\n    profileTitle.textContent = profileInfo.name;\n    profileDescription.textContent = profileInfo.about;\n    profileAvatar.style.backgroundImage = `url(${profileInfo.avatar})`;\n    myId = profileInfo._id;\n    // показываем карточки\n    cardList.forEach((card) => {\n      card.myId = myId;\n      placesList.append(addCard(card, funcObj));\n    });\n  })\n  .catch((err) => {\n    console.log(`Не удалось загрузить данные. ${err}`);\n  });\n\n// во время загрузки меняем текст кнопки\nfunction renderLoading(\n  isLoading,\n  btn,\n  defaultText = \"Сохранить\",\n  newText = \"Сохранение...\"\n) {\n  const buttonText = isLoading ? newText : defaultText;\n  btn.textContent = buttonText;\n}\n// обработчики submit\nfunction handleEditProfileFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, editProfilePopupObj.button);\n\n  const name = editProfilePopupObj.form.name.value;\n  const about = editProfilePopupObj.form.description.value;\n  setProfileInfoApi(name, about)\n    .then((res) => {\n      profileTitle.textContent = res.name;\n      profileDescription.textContent = res.about;\n      closeModal(editProfilePopupObj.popup);\n    })\n    .catch((err) => console.log(`Не удалось изменить профиль. ${err}`))\n    .finally(() =>\n      setTimeout(() => renderLoading(false, editProfilePopupObj.button), 600)\n    );\n}\n// добавляем новую карточку\nfunction handleAddCardFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, addNewCardPopupObj.button);\n  const name = addNewCardPopupObj.form.name.value;\n  const link = addNewCardPopupObj.form.link.value;\n  addCardApi(name, link)\n    .then((res) => {\n      res.myId = myId;\n      placesList.prepend(addCard(res, funcObj));\n      closeModal(addNewCardPopupObj.popup);\n    })\n    .catch((err) => console.log(`Не удалось добавить карточку. ${err}`))\n    .finally(() =>\n      setTimeout(() => renderLoading(false, addNewCardPopupObj.button), 600)\n    );\n}\n// фунция для удаления карточки, заменяется в funcObj\nlet handleCardRemoveSubmit = function (evt) {\n  evt.preventDefault();\n};\n// меняем аватарку\nfunction handleEditAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, editProfileAvatarPopupObj.button);\n  const url = editProfileAvatarPopupObj.form.link.value;\n\n  setProfileAvatar(url)\n    .then((res) => {\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`;\n      closeModal(editProfileAvatarPopupObj.popup);\n    })\n    .catch((err) => console.log(`Не удалось загрузить аватар. ${err}`))\n    .finally(() =>\n      setTimeout(\n        () => renderLoading(false, editProfileAvatarPopupObj.button),\n        600\n      )\n    );\n}\n\n// обработчик клика по картинке карточки\nfunction handleCardImgClick(evt) {\n  imagePopupObj.img.src = evt.target.src;\n  imagePopupObj.img.alt = evt.target.alt;\n  imagePopupObj.caption.textContent = evt.target.alt;\n  openModal(imagePopupObj.popup);\n}\n\n// открытие попапов\naddCardButton.addEventListener(\"click\", function () {\n  addNewCardPopupObj.form.reset();\n  clearValidation(addNewCardPopupObj.form, validationObj);\n  openModal(addNewCardPopupObj.popup);\n});\nprofileEditButton.addEventListener(\"click\", function () {\n  clearValidation(editProfilePopupObj.form, validationObj);\n  editProfilePopupObj.form.name.value = profileTitle.textContent;\n  editProfilePopupObj.form.description.value = profileDescription.textContent;\n  openModal(editProfilePopupObj.popup);\n});\nprofileAvatar.addEventListener(\"click\", function () {\n  editProfileAvatarPopupObj.form.reset();\n  clearValidation(editProfileAvatarPopupObj.form, validationObj);\n  openModal(editProfileAvatarPopupObj.popup);\n});\n\n// submit\naddNewCardPopupObj.form.addEventListener(\"submit\", handleAddCardFormSubmit);\neditProfilePopupObj.form.addEventListener(\n  \"submit\",\n  handleEditProfileFormSubmit\n);\neditProfileAvatarPopupObj.form.addEventListener(\n  \"submit\",\n  handleEditAvatarFormSubmit\n);\nremoveCardPopupObj.form.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  renderLoading(true, removeCardPopupObj.button, \"Да\", \"Идёт удаление\");\n  handleCardRemoveSubmit(evt);\n});\n\n// валидация инпутов\nenableValidation(validationObj);\n"],"names":["cardTemplate","document","querySelector","content","addCard","cardObj","funcObj","cardElement","cloneNode","ownerId","owner","_id","cardId","myId","name","link","likes","removeFunc","likeFunc","imgClickFunc","title","img","removeBtn","likeBtn","classList","add","length","some","item","updateLikeCounter","textContent","alt","src","addEventListener","evt","contains","button","count","closest","openModal","popup","openedPopup","closeModalWithMouse","closeModalWithEsc","closeModal","remove","removeEventListener","target","key","currentTarget","clearValidation","formElement","settingsObj","inputList","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","inputElement","hideInputError","concat","id","inputErrorClass","errorActiveClass","setCustomValidity","toggleButtonState","inactiveButtonClass","errorElement","buttonElement","inactiveButtonSelector","validity","valid","value","hasInvalidInput","config","baseUrl","headers","authorization","getResponseData","res","ok","json","Promise","reject","status","placesList","profileTitle","profileDescription","profileAvatar","addCardButton","profileEditButton","addNewCardPopup","addNewCardPopupObj","form","editProfilePopup","editProfilePopupObj","editProfileAvatarPopup","editProfileAvatarPopupObj","removeCardPopup","removeCardPopupObj","imagePopup","imagePopupObj","caption","validationObj","formSelector","errorSelector","handleCardRemoveSubmit","event","preventDefault","fetch","method","then","removeCard","catch","err","console","log","finally","setTimeout","renderLoading","isAlreadyLiked","requestMethod","likeCardApi","likeCard","isLoading","btn","buttonText","arguments","undefined","all","resList","_resList","profileInfo","cardList","about","style","backgroundImage","avatar","card","append","reset","description","body","JSON","stringify","prepend","url","patternMismatch","dataset","patternMismatchError","validationMessage","showInputError","checkInputValidity","setEventListeners"],"sourceRoot":""}