{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\n\n// Функция создания карточки\nfunction addCard(cardObj, funcObj) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const {\n    owner: { _id: ownerId },\n    _id: cardId,\n    myId,\n    name,\n    link,\n    likes,\n  } = cardObj;\n  const { removeFunc, likeFunc, imgClickFunc } = funcObj;\n  const title = cardElement.querySelector(\".card__title\");\n  const img = cardElement.querySelector(\".card__image\");\n  const removeBtn = cardElement.querySelector(\".card__delete-button\");\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\n  // обновим состояние элементов карточки\n  if (ownerId !== myId) {\n    removeBtn.classList.add(\"card__delete-button_hidden\");\n  }\n  if (likes.length > 0 && likes.some((item) => item._id === myId)) {\n    likeBtn.classList.add(\"card__like-button_is-active\");\n  }\n  updateLikeCounter(likeBtn, likes.length);\n\n  title.textContent = name;\n  img.alt = name;\n  img.src = link;\n\n  removeBtn.addEventListener(\"click\", (evt) => removeFunc(removeBtn, cardId));\n  likeBtn.addEventListener(\"click\", (evt) => likeFunc(likeBtn, cardId));\n  img.addEventListener(\"click\", imgClickFunc);\n\n  return cardElement;\n}\n\n// Функция удаления карточки\nfunction removeCard(button) {\n  button.closest(\".card\").remove();\n}\n\n// лайк\nfunction likeCard(button) {\n  button.classList.toggle(\"card__like-button_is-active\");\n}\n\n// обновляем счетчик лайков\nfunction updateLikeCounter(button, count) {\n  const counter = button.closest(\".card\").querySelector(\".card__like-counter\");\n  counter.textContent = count;\n}\n\nexport { addCard, removeCard, likeCard, updateLikeCounter };\n","function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.openedPopup = popup;\n  document.addEventListener(\"mousedown\", closeModalWithMouse);\n  document.addEventListener(\"keydown\", closeModalWithEsc);\n}\n\nfunction closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"mousedown\", closeModalWithMouse);\n  document.removeEventListener(\"keydown\", closeModalWithEsc);\n}\n\nfunction closeModalWithMouse(evt) {\n  if (\n    evt.target.classList.contains(\"popup__close\") ||\n    evt.target.classList.contains(\"popup\")\n  ) {\n    const popup = evt.target.closest(\".popup\");\n    closeModal(popup);\n  }\n}\n\nfunction closeModalWithEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closeModal(evt.currentTarget.openedPopup);\n  }\n}\n\nexport {\n  openModal,\n  closeModal,\n};\n","function enableValidation(settingsObj) {\n  const formList = Array.from(\n    document.querySelectorAll(settingsObj.formSelector)\n  );\n\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, settingsObj);\n  });\n}\n\nfunction clearValidation(formElement, settingsObj) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settingsObj.inputSelector)\n  );\n  const button = formElement.querySelector(settingsObj.submitButtonSelector);\n  inputList.forEach((inputElement) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    hideInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n    inputElement.setCustomValidity(\"\");\n  });\n  toggleButtonState(inputList, button, settingsObj.inactiveButtonClass);\n}\n\nfunction setEventListeners(formElement, settingsObj) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settingsObj.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settingsObj.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, settingsObj.inactiveButtonClass);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, settingsObj);\n      toggleButtonState(\n        inputList,\n        buttonElement,\n        settingsObj.inactiveButtonClass\n      );\n    });\n  });\n}\n\nfunction checkInputValidity(formElement, inputElement, settingsObj) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.patternMismatchError);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n  // основная проверка на валидность\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  if (!inputElement.validity.valid) {\n    showInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n  } else {\n    hideInputError(\n      errorElement,\n      inputElement,\n      settingsObj.inputErrorClass,\n      settingsObj.errorActiveClass\n    );\n  }\n}\n\nfunction showInputError(\n  errorElement,\n  inputElement,\n  inputErrorClass,\n  errorActiveClass\n) {\n  errorElement.textContent = inputElement.validationMessage;\n  errorElement.classList.add(errorActiveClass);\n  inputElement.classList.add(inputErrorClass);\n}\n\nfunction hideInputError(\n  errorElement,\n  inputElement,\n  inputErrorClass,\n  errorActiveClass\n) {\n  errorElement.textContent = \"\";\n  errorElement.classList.remove(errorActiveClass);\n  inputElement.classList.remove(inputErrorClass);\n}\n\nfunction hasInvalidInput(inputList) {\n  return (\n    inputList.some((inputElement) => !inputElement.validity.valid) ||\n    inputList.some((inputElement) => inputElement.value === \"\")\n  );\n}\n\nfunction toggleButtonState(inputList, buttonElement, inactiveButtonSelector) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(inactiveButtonSelector);\n  } else {\n    buttonElement.classList.remove(inactiveButtonSelector);\n  }\n}\n\nexport { enableValidation, clearValidation };\n","const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-8\",\n  headers: {\n    authorization: \"6aa9cfa4-9e37-45ec-86e7-4ccce0f3abad\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction getResponseData(res) {\n  return res.then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  });\n}\n\nfunction getProfileInfoApi() {\n  return getResponseData(\n    fetch(`${config.baseUrl}/users/me`, {\n      headers: config.headers,\n    })\n  );\n}\n\nfunction getCardListApi() {\n  return getResponseData(\n    fetch(`${config.baseUrl}/cards`, {\n      headers: config.headers,\n    })\n  );\n}\n\nfunction setProfileInfoApi(name, about) {\n  return getResponseData(\n    fetch(`${config.baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: config.headers,\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    })\n  );\n}\n\nfunction addCardApi(name, link) {\n  return getResponseData(\n    fetch(`${config.baseUrl}/cards`, {\n      method: \"POST\",\n      headers: config.headers,\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    })\n  );\n}\n\nfunction removeCardApi(cardId) {\n  return getResponseData(\n    fetch(`${config.baseUrl}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: config.headers,\n    })\n  );\n}\n\nfunction likeCardApi(cardId, isAlreadyLiked) {\n  const requestMethod = isAlreadyLiked ? \"DELETE\" : \"PUT\";\n  return getResponseData(\n    fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n      method: requestMethod,\n      headers: config.headers,\n    })\n  );\n}\n\nfunction setProfileAvatar(url) {\n  return getResponseData(\n    fetch(`${config.baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: config.headers,\n      body: JSON.stringify({\n        avatar: url,\n      }),\n    })\n  );\n}\n\nexport {\n  getProfileInfoApi,\n  setProfileInfoApi,\n  getCardListApi,\n  addCardApi,\n  removeCardApi,\n  likeCardApi,\n  setProfileAvatar,\n};\n","import \"../pages/index.css\";\nimport { addCard, removeCard, likeCard, updateLikeCounter } from \"./card\";\nimport { openModal, closeModal } from \"./modal\";\nimport { enableValidation, clearValidation } from \"./validation\";\nimport {\n  getProfileInfoApi,\n  setProfileInfoApi,\n  getCardListApi,\n  addCardApi,\n  removeCardApi,\n  likeCardApi,\n  setProfileAvatar,\n  getLikesApi,\n} from \"./api\";\n\n// список с карточками\nconst placesList = document.querySelector(\".places__list\");\n// Данные профиля\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst profileAvatar = document.querySelector(\".profile__image\");\n// кнопки открытия попапов\nconst addCardButton = document.querySelector(\".profile__add-button\");\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\n\n// классы для генерации объектов со всеми нужными элементами попапа\nclass Popup {\n  constructor(popupClass) {\n    this.popup = document.querySelector(popupClass);\n  }\n}\nclass FormPopup extends Popup {\n  constructor(popupClass) {\n    super(popupClass);\n    this.form = this.popup.querySelector(\".popup__form\");\n    this.button = this.popup.querySelector(\".popup__button\");\n  }\n}\nclass ImgPopup extends Popup {\n  constructor(popupClass) {\n    super(popupClass);\n    this.img = this.popup.querySelector(\".popup__image\");\n    this.caption = this.popup.querySelector(\".popup__caption\");\n  }\n}\n\n// попап объекты\nconst addNewCardPopupObj = new FormPopup(\".popup_type_new-card\");\nconst editProfilePopupObj = new FormPopup(\".popup_type_edit\");\nconst editProfileAvatarPopupObj = new FormPopup(\".popup_type_avatar-edit\");\nconst removeCardPopupObj = new FormPopup(\".popup_type_remove-card\");\nconst imagePopupObj = new ImgPopup(\".popup_type_image\");\n// объект с настройками для валидации\nconst validationObj = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  errorSelector: \".popup__input-error\",\n  inputErrorClass: \"popup__input_error\",\n  errorActiveClass: \"popup__input-error_active\",\n};\n// Объект с функциями\nconst funcObj = {\n  removeFunc: function (button, id) {\n    handleCardRemoveSubmit = function (event) {\n      event.preventDefault();\n      removeCardApi(id)\n        .then(() => {\n          removeCard(button);\n          closeModal(removeCardPopupObj.popup);\n          setTimeout(\n            () =>\n              renderLoading(\n                false,\n                removeCardPopupObj.button,\n                \"Да\",\n                \"Идёт удаление\"\n              ),\n            600\n          );\n        })\n        .catch((err) => console.log(`Не удалось удалить карточку. ${err}`));\n    };\n    openModal(removeCardPopupObj.popup);\n  },\n  likeFunc: function (button, id) {\n    // находим карточку и выясняем лайкали ли мы её\n    getCardListApi()\n      .then((cardList) => {\n        let card;\n        cardList.forEach((item) => {\n          if (item._id === id) {\n            card = item;\n          }\n        });\n        return card.likes.some((item) => item._id === myId);\n      })\n      // ставим или убираем лайк\n      .then((isAlreadyLiked) => {\n        likeCardApi(id, isAlreadyLiked)\n          .then((res) => {\n            likeCard(button);\n            updateLikeCounter(button, res.likes.length);\n          })\n          .catch((err) => console.log(`Не удалось поставить лайк. ${err}`));\n      })\n      .catch((err) => console.log(`Не удалось поставить лайк. ${err}`));\n  },\n  imgClickFunc: handleCardImgClick,\n};\n\n// берём данные профиля и карточки и добавляем на страницу\nlet myId;\nPromise.all([getProfileInfoApi(), getCardListApi()])\n  .then((resList) => {\n    // обновляем профиль\n    const [profileInfo, cardList] = resList;\n    profileTitle.textContent = profileInfo.name;\n    profileDescription.textContent = profileInfo.about;\n    profileAvatar.style.backgroundImage = `url(${profileInfo.avatar})`;\n    myId = profileInfo._id;\n    // показываем карточки\n    cardList.forEach((card) => {\n      card.myId = myId;\n      placesList.append(addCard(card, funcObj));\n    });\n  })\n  .catch((err) => {\n    console.log(`Не удалось загрузить данные. ${err}`);\n  });\n\n// во время загрузки меняем текст кнопки\nfunction renderLoading(\n  isLoading,\n  btn,\n  defaultText = \"Сохранить\",\n  newText = \"Сохранение...\"\n) {\n  const buttonText = isLoading ? newText : defaultText;\n  btn.textContent = buttonText;\n}\n// обработчики submit\nfunction handleEditProfileFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, editProfilePopupObj.button);\n\n  const name = editProfilePopupObj.form.name.value;\n  const about = editProfilePopupObj.form.description.value;\n  setProfileInfoApi(name, about)\n    .then((res) => {\n      profileTitle.textContent = res.name;\n      profileDescription.textContent = res.about;\n      closeModal(editProfilePopupObj.popup);\n      setTimeout(() => renderLoading(false, editProfilePopupObj.button), 600);\n    })\n    .catch((err) => console.log(`Не удалось изменить профиль. ${err}`));\n}\n// добавляем новую карточку\nfunction handleAddCardFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, addNewCardPopupObj.button);\n  const name = addNewCardPopupObj.form.name.value;\n  const link = addNewCardPopupObj.form.link.value;\n  addCardApi(name, link)\n    .then((res) => {\n      res.myId = myId;\n      placesList.prepend(addCard(res, funcObj));\n      closeModal(addNewCardPopupObj.popup);\n      setTimeout(() => renderLoading(false, addNewCardPopupObj.button), 600);\n    })\n    .catch((err) => console.log(`Не удалось добавить карточку. ${err}`));\n}\n// фунция для удаления карточки, заменяется в funcObj\nlet handleCardRemoveSubmit = function (evt) {\n  evt.preventDefault();\n};\n// меняем аватарку\nfunction handleEditAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, editProfileAvatarPopupObj.button);\n  const url = editProfileAvatarPopupObj.form.link.value;\n\n  setProfileAvatar(url)\n    .then((res) => {\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`;\n      closeModal(editProfileAvatarPopupObj.popup);\n      setTimeout(\n        () => renderLoading(false, editProfileAvatarPopupObj.button),\n        600\n      );\n    })\n    .catch((err) => console.log(`Не удалось загрузить аватар. ${err}`));\n}\n\n// обработчик клика по картинке карточки\nfunction handleCardImgClick(evt) {\n  imagePopupObj.img.src = evt.target.src;\n  imagePopupObj.img.alt = evt.target.alt;\n  imagePopupObj.caption.textContent = evt.target.alt;\n  openModal(imagePopupObj.popup);\n}\n\n// открытие попапов\naddCardButton.addEventListener(\"click\", function () {\n  addNewCardPopupObj.form.reset();\n  clearValidation(addNewCardPopupObj.form, validationObj);\n  openModal(addNewCardPopupObj.popup);\n});\nprofileEditButton.addEventListener(\"click\", function () {\n  clearValidation(editProfilePopupObj.form, validationObj);\n  editProfilePopupObj.form.name.value = profileTitle.textContent;\n  editProfilePopupObj.form.description.value = profileDescription.textContent;\n  openModal(editProfilePopupObj.popup);\n});\nprofileAvatar.addEventListener(\"click\", function () {\n  editProfileAvatarPopupObj.form.reset();\n  clearValidation(editProfileAvatarPopupObj.form, validationObj);\n  openModal(editProfileAvatarPopupObj.popup);\n});\n\n// submit\naddNewCardPopupObj.form.addEventListener(\"submit\", handleAddCardFormSubmit);\neditProfilePopupObj.form.addEventListener(\n  \"submit\",\n  handleEditProfileFormSubmit\n);\neditProfileAvatarPopupObj.form.addEventListener(\n  \"submit\",\n  handleEditAvatarFormSubmit\n);\nremoveCardPopupObj.form.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  renderLoading(true, removeCardPopupObj.button, \"Да\", \"Идёт удаление\");\n  handleCardRemoveSubmit(evt);\n});\n\n// валидация инпутов\nenableValidation(validationObj);\n"],"names":["cardTemplate","document","querySelector","content","addCard","cardObj","funcObj","cardElement","cloneNode","ownerId","owner","_id","cardId","myId","name","link","likes","removeFunc","likeFunc","imgClickFunc","title","img","removeBtn","likeBtn","classList","add","length","some","item","updateLikeCounter","textContent","alt","src","addEventListener","evt","button","count","closest","openModal","popup","openedPopup","closeModalWithMouse","closeModalWithEsc","closeModal","remove","removeEventListener","target","contains","key","currentTarget","clearValidation","formElement","settingsObj","inputList","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","inputElement","hideInputError","concat","id","inputErrorClass","errorActiveClass","setCustomValidity","toggleButtonState","inactiveButtonClass","errorElement","buttonElement","inactiveButtonSelector","validity","valid","value","hasInvalidInput","config","baseUrl","headers","authorization","getResponseData","res","then","ok","json","Promise","reject","status","getCardListApi","fetch","placesList","profileTitle","profileDescription","profileAvatar","addCardButton","profileEditButton","Popup","_createClass","popupClass","_classCallCheck","this","FormPopup","_Popup","_this","_callSuper","form","_inherits","ImgPopup","_Popup2","_this2","caption","addNewCardPopupObj","editProfilePopupObj","editProfileAvatarPopupObj","removeCardPopupObj","imagePopupObj","validationObj","formSelector","errorSelector","handleCardRemoveSubmit","event","preventDefault","method","removeCard","setTimeout","renderLoading","catch","err","console","log","cardList","card","isAlreadyLiked","requestMethod","likeCardApi","toggle","likeCard","isLoading","btn","buttonText","arguments","undefined","all","resList","_resList","profileInfo","about","style","backgroundImage","avatar","append","reset","description","body","JSON","stringify","prepend","url","patternMismatch","dataset","patternMismatchError","validationMessage","showInputError","checkInputValidity","setEventListeners"],"sourceRoot":""}